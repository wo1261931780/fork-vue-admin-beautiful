/*!
 *  基于vue-admin-beautiful构建 
 *  copyright: chuzhixin 1204505056@qq.com 
 *  time: 2020-6-28 14:45:08
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51d9ccbf"],{"744a":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"permission-container"},[r("el-divider",{attrs:{"content-position":"left"}},[e._v(" intelligence模式,前端根据permissions拦截路由(演示环境,默认使用此方案) ")]),r("el-form",{ref:"form",attrs:{model:e.form,inline:!0}},[r("el-form-item",{attrs:{label:"切换账号"}},[r("el-radio-group",{model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}},[r("el-radio",{attrs:{label:"admin"}},[e._v("admin")]),r("el-radio",{attrs:{label:"editor"}},[e._v("editor")]),r("el-radio",{attrs:{label:"test"}},[e._v("test")])],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleChangePermission}},[e._v("切换权限 ")])],1),r("el-form-item",{attrs:{label:"当前账号拥有的权限"}},[e._v(" "+e._s(JSON.stringify(e.permissions))+" ")])],1),r("el-divider",{attrs:{"content-position":"left"}},[e._v(" 按钮级权限演示 ")]),r("el-button",{directives:[{name:"permissions",rawName:"v-permissions",value:["admin"],expression:"['admin']"}],attrs:{type:"primary"}},[e._v(' 我是拥有["admin"]权限的按钮 ')]),r("el-button",{directives:[{name:"permissions",rawName:"v-permissions",value:["editor"],expression:"['editor']"}],attrs:{type:"primary"}},[e._v(' 我是拥有["editor"]权限的按钮 ')]),r("el-button",{directives:[{name:"permissions",rawName:"v-permissions",value:["test"],expression:"['test']"}],attrs:{type:"primary"}},[e._v(' 我是拥有["test"]权限的按钮 ')]),r("el-divider",{attrs:{"content-position":"left"}},[e._v(" all模式,路由以及view文件引入全部交给后端(权限复杂,且随时变更,建议使用此方案) ")]),r("p",[e._v(" settings.js配置authentication为all即可完全交由后端控制,mock中有后端接口示例,权限繁琐,有几十种权限的项目直接用这种, 由于演示环境是mock数据模拟,可能无法展现此功能的配置,只做如下展示,便于您的理解 ")]),r("br"),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[r("el-table",{attrs:{data:e.tableData,"row-key":"path",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[r("el-table-column",{attrs:{prop:"name",label:"name"}}),r("el-table-column",{attrs:{prop:"path",label:"path"}}),r("el-table-column",{attrs:{prop:"component",label:"component"}}),r("el-table-column",{attrs:{prop:"redirect",label:"redirect"}}),r("el-table-column",{attrs:{prop:"meta.title",label:"标题"}}),r("el-table-column",{attrs:{label:"图标"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.meta?r("span",[t.row.meta.icon?r("vab-icon",{attrs:{icon:["fas",t.row.meta.icon]}}):e._e()],1):e._e()]}}])}),r("el-table-column",{attrs:{label:"是否固定"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.meta?r("span",[e._v(" "+e._s(t.row.meta.affix)+" ")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"是否无缓存"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.meta?r("span",[e._v(" "+e._s(t.row.meta.noKeepAlive)+" ")]):e._e()]}}])})],1)],1),r("el-col",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[r("json-editor",{attrs:{value:e.res}})],1)],1)],1)},n=[],s=(r("b449"),r("6648")),i=r("9b6e"),o=r("ae8c"),l=r("778c"),c=r("2033"),u=r("fa7e"),m={name:"Permission",components:{JsonEditor:u["default"]},data:function(){return{form:{permission:""},tableData:[],res:[]}},computed:Object(i["a"])({},Object(o["c"])({userName:"user/userName",permissions:"user/permissions"})),created:function(){this.fetchData()},mounted:function(){this.form.permission=this.userName},methods:{handleChangePermission:function(){localStorage.setItem(l["tokenTableName"],"".concat(this.form.permission,"-accessToken")),location.reload()},fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["getRouterList"])();case 2:r=t.sent,e.tableData=r.data,e.res=r;case 5:case"end":return t.stop()}}),t)})))()}}},d=m,p=r("9ca4"),f=Object(p["a"])(d,a,n,!1,null,null,null);t["default"]=f.exports},b5d6:function(e,t,r){"use strict";var a=r("ffb1"),n=r.n(a);n.a},fa7e:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"json-editor"},[r("label",[r("textarea",{ref:"textarea"})])])},n=[],s=r("4f54"),i=r("444e"),o=r.n(i);r("a1be"),r("1f94"),r("4162"),r("3f24"),r("3299"),r("9c02");r("548c");var l={name:"JsonEditor",props:{value:{type:[Array,Object],default:function(){return null}}},data:function(){return{jsonEditor:!1}},watch:{value:function(e){var t=this.jsonEditor.getValue();t?this.$emit("change",t):this.$baseMessage("JSON不能为空,否则无法生成表格","error"),e!==t&&this.jsonEditor.setValue(JSON.stringify(this.value,null,2))}},mounted:function(){var e=this;this.jsonEditor=o.a.fromTextArea(this.$refs.textarea,{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}),this.jsonEditor.setValue(JSON.stringify(this.value,null,2)),this.jsonEditor.on("change",(function(t){e.isJsonString(t.getValue())&&e.$emit("change",t.getValue())}))},methods:{getValue:function(){return this.jsonEditor.getValue()},isJsonString:function(e){try{if("object"==Object(s["a"])(JSON.parse(e)))return!0}catch(t){}return!1}}},c=l,u=(r("b5d6"),r("9ca4")),m=Object(u["a"])(c,a,n,!1,null,"763e05ce",null);t["default"]=m.exports},ffb1:function(e,t,r){}}]);